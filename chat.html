<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #chat-box { height: 300px; overflow-y: scroll; border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
        #message { width: 80%; padding: 5px; }
        #sendBtn { padding: 5px 10px; }
    </style>
    <script type="module">
        // Firebase setup
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, query, orderBy, onSnapshot } 
        from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const chatRef = collection(db, "messages");

        // Listen for new messages
        const chatBox = document.getElementById("chat-box");
        const q = query(chatRef, orderBy("timestamp", "asc"));
        onSnapshot(q, (snapshot) => {
            chatBox.innerHTML = "";
            snapshot.forEach((doc) => {
                let msg = doc.data();
                chatBox.innerHTML += `<p><strong>${msg.name}:</strong> ${msg.text}</p>`;
            });
            chatBox.scrollTop = chatBox.scrollHeight;
        });

        // Send message
        window.sendMessage = async () => {
            const name = "User"; // Change this to dynamic usernames
            const message = document.getElementById("message").value;
            if (message.trim() === "") return;
            await addDoc(chatRef, { name, text: message, timestamp: new Date() });
            document.getElementById("message").value = "";
        };
    </script>
    <link rel="stylesheet" href="chat.css"> 
</head>
<body>
    <h2>Real-Time Chat</h2>
    <div id="chat-box"></div>
    <input type="text" id="message" placeholder="Type a message..." />
    <button id="sendBtn" onclick="sendMessage()">Send</button>
</body>
</html>
